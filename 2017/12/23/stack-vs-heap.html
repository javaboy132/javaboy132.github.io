<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Stack vs Heap</title>
	
	<meta name="author" content="Alexander C">

	<!-- Enable responsive viewport -->
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
	<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

	<!-- Le styles -->
	<link href="/assets/resources/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<link href="/assets/resources/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="/assets/resources/syntax/syntax.css" rel="stylesheet">
	<link href="/assets/css/style.css" rel="stylesheet">

	<!-- Le fav and touch icons -->
	<!-- Update these with your own images
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	-->

	<link rel="alternate" type="application/rss+xml" title="" href="/feed.xml">
</head>

<body>
	<nav class="navbar navbar-default visible-xs" role="navigation">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
			<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			
			<a type="button" class="navbar-toggle nav-link" href="http://github.com/javaboy132">
				<i class="fa fa-github"></i>
			</a>
			
			
			
			<a class="navbar-brand" href="/">
				<!--<img src="//www.gravatar.com/avatar/?s=35" class="img-circle" />-->
				Coding Thoughts
			</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav">
				<li class="active"><a href="/">Home</a></li>
				<li><a href="/categories.html">Categories</a></li>
				<li><a href="/tags.html">Tags</a></li>
			</ul>
		</div><!-- /.navbar-collapse -->
	</nav>

	<!-- nav-menu-dropdown -->
	<div class="btn-group hidden-xs" id="nav-menu">
		<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
			<i class="fa fa-bars"></i>
		</button>
		<ul class="dropdown-menu" role="menu">
			<li><a href="/"><i class="fa fa-home"></i>Home</a></li>
			<li><a href="/categories.html"><i class="fa fa-folder"></i>Categories</a></li>
			<li><a href="/tags.html"><i class="fa fa-tags"></i>Tags</a></li>
			<li class="divider"></li>
			<li><a href="#"><i class="fa fa-arrow-up"></i>Top of Page</a></li>
		</ul>
	</div>

	<div class="col-sm-3 sidebar hidden-xs" style="">
		<!-- sidebar.html -->
<header class="sidebar-header" role="banner">
	<a href="/">
		<!--<img src="//www.gravatar.com/avatar/?s=150" class="img-circle" />-->
	</a>
	<h3 class="title">
        <a href="/">Coding Thoughts</a>
    </h3>
</header>


<div id="bio" class="text-center">
	Some random programming thoughts.
</div>


<div id="contact-list" class="text-center">
	<ul class="list-unstyled list-inline">
		
		<li>
			<a class="btn btn-default btn-sm" href="https://github.com/javaboy132">
				<i class="fa fa-github-alt fa-lg"></i>
			</a>
		</li>
		
		
		
	</ul>
	<ul id="contact-list-secondary" class="list-unstyled list-inline">
		
		
		<li>
			<a class="btn btn-default btn-sm" href="/feed.xml">
				<i class="fa fa-rss fa-lg"></i>
			</a>
		</li>
	</ul>
</div>
<!-- sidebar.html end -->

	</div>

	<div class="col-sm-9 col-sm-offset-3">
		<div class="page-header">
  <h1>Stack vs Heap </h1>
</div>
	
<article>

	<div class="col-sm-10">
	 <span class="post-date">
	   
	   December 
	   23rd,
	     
	   2017
	 </span>
	  <div class="article_body">
	  <p>What is the stack and what is the heap? And what is the difference between these two?  That’s what we’re looking at today.</p>

<h1 id="the-stack">The Stack</h1>

<p>This is the thing that local variables are stored on usually, as well as return values and function parameters.  For example, if you had something that looks like this:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">int</span> <span class="n">main</span><span class="p">(){</span>
	<span class="kt">int</span> <span class="n">a</span><span class="p">;</span>
	<span class="kt">int</span> <span class="n">b</span><span class="p">;</span>
	<span class="n">a</span><span class="o">=</span><span class="mi">4</span><span class="p">;</span>
	<span class="n">b</span><span class="o">=</span><span class="n">a</span><span class="o">*</span><span class="mi">2</span><span class="p">;</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"a= %d b= %d"</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>Then <code class="highlighter-rouge">a</code> and <code class="highlighter-rouge">b</code> will be stored on the stack.  The stack is copied for each function as well, and is often called a <a href="https://en.wikipedia.org/wiki/Call_stack">call-stack</a>.</p>

<h2 id="how-is-the-stack-organized">How is the stack organized?</h2>

<p>This relies on an understanding of how memory is organized.</p>

<p>Memory can basically be thought of as one long street with a bunch of houses on it, in each house resides multiple bytes based on the bit width of your device, 4 bytes wide for 32-bit systems, 8 wide for 64-bit systems.  Each byte lives in its own little apartment.  Each apartment gets a number, corresponding to which apartment it is within which house.</p>

<p>So for the leftmost house on the block, we have 4 apartments, labeled 0, 1, 2, 3. For the next house they’re numbered 4, 5, 6, 7, and so on.  However to make things simpler, when we ring the doorbell on a house, we can access each of the bytes inside, so for accessing apartment 3, we can use address 0, and that will get us access to bytes/apartments 0, 1, 2, and 3.</p>

<p>Now that’s the basics of how memory is organized, how does this relate to the stack? Well the stack is in memory of course!  When we have a stack, we have a stack pointer that points to the top of the stack.</p>

<p>So basically a stack is allocated, a chunk of these houses which are all next to each other are reserved to hold the stack.  Then we get a stack pointer that points to a house that is available for use.</p>

<p>Then when we need to push something onto the stack, we put the value where the pointer was pointing, and the increase the address the pointer is pointing to so that it points to the next available house.</p>

<p>When we need to pop something, we just decrease the stack pointer and get the value that it is pointing to.</p>

<h2 id="different-stack-formats">Different stack formats</h2>

<p>It turns out that there are a few different kinds of stack organization, as this is really an abstract thing with more than one way to do it.  In fact there are four kinds:</p>
<ul>
  <li>Full Ascending</li>
  <li>Empty Ascending</li>
  <li>Full Descending</li>
  <li>Empty Ascending</li>
</ul>

<p>Of course if you look closely, you’ll notice that these are really just permutations of full or empty, and ascending or descending.</p>

<p>So what makes a stack empty or full? Well, this simply has to do with whether or not the stack pointer is pointing to the next empty house, or the last filled house.</p>

<p>What makes a stack ascending or descending? This just has to do with whether we start with the highest numbered house and count down, or start at the lowest numbered stack and count up.</p>

<p>Is there any advantage to one method or another?  Not really, but usually it’s nice to have the stack expand towards a direction where it has lots of space to expand.</p>

<h1 id="the-heap">The Heap</h1>

<p>Okay, on to the heap.  This is where your objects are stored.  In C++ when you use the <code class="highlighter-rouge">new</code> keyword, you create the object on the heap and store the address of the item into your variable. For example:</p>

<figure class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="kt">int</span> <span class="n">main</span><span class="p">(){</span>
	<span class="kt">int</span> <span class="n">a</span><span class="o">*</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">(</span><span class="mi">1337</span><span class="p">);</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<p>In this example, we create a pointer <code class="highlighter-rouge">a</code> which receives the address of an integer that has been allocated on the heap with value 1337.</p>

<p>The heap is a special place though, because unlike the stack, it stays put for the entirety of a program’s existence, and doesn’t create a new version for each function.  This is great because there can be some overhead when calling functions because of this.</p>

<h1 id="heap-vs-stack-final-showdown">Heap vs Stack Final Showdown</h1>

<p>So, when you call a function with some parameters, what happens?</p>

<p>With the stack, passing parameters by value, the values must be copied over to the new stack, which will take up memory, and may take up some time.  How much memory and how much time depends on how large the data is.</p>

<p>With the heap, passing parameters by reference, the values stay put in the heap, and the addresses are copied, taking up less memory and not quite as much time.</p>

<p>So when should we use what?  Should we then just use pass by reference for everything?  No. Because copying an address will take time and memory space too.  In fact most addresses will take about the same amount of memory and time as an integer.</p>

<p>So for nearly any simple type, just pass by value.  But for things like arrays, fancy data structures, and your fancy objects, it might be a good idea to pass by reference, just be aware that doing so can result in your original data being modified.</p>

<p>Stay tuned for more stuff on pointers, and possibly the call-stack.</p>


	  </div>

		
		<ul class="tag_box list-unstyled list-inline">
		  <li><i class="fa fa-folder-open"></i></li>
		  
		  
			 
				<li><a href="/categories.html#programming-ref">
					programming <span>(1)</span>
					,
				</a></li>
			 
				<li><a href="/categories.html#tutorials-ref">
					tutorials <span>(1)</span>
					
				</a></li>
			
		  
		</ul>
		  

		  

		<hr>

		<div>
      <section class="share col-sm-6">
        <h4 class="section-title">Share Post</h4>
        <a class="btn btn-default btn-sm twitter" href="http://twitter.com/share?text=Stack vs Heap"
           onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
          <i class="fa fa-twitter fa-lg"></i>
          Twitter
        </a>
        <a class="btn btn-default btn-sm facebook" href="https://www.facebook.com/sharer/sharer.php"
           onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
          <i class="fa fa-facebook fa-lg"></i>
          Facebook
        </a>
        <a class="btn btn-default btn-sm gplus"
           onclick="window.open('https://plus.google.com/share?url='+window.location.href, 'google-plus-share', 'width=490,height=530');return false;">
          <i class="fa fa-google-plus fa-lg"></i>
          Google+
        </a>
      </section>

      <section class="col-sm-6 author">
	      <!--<img src="//www.gravatar.com/avatar/" class="img-rounded author-image" />-->
        <h4 class="section-title author-name">Alexander C</h4>
        <p class="author-bio">Some random programming thoughts.</p>
      </section>
    </div>

    <div class="clearfix"></div>

		<ul class="pager">
		  
		  <li class="previous disabled"><a>&larr; Previous</a></li>
		  
		  
			<li class="next disabled"><a>Next &rarr;</a>
		  
		</ul>

		<hr>
	</div>
	
	<div class="col-sm-2 sidebar-2">
	
	</div>
</article>
<div class="clearfix"></div>





		<footer>
			<hr/>
			<p>
				&copy; 2017 Alexander C with <a href="http://jekyllrb.com/">Jekyll</a>. Theme: <a href="https://github.com/dbtek/dbyll">dbyll</a> by dbtek.
			</p>
		</footer>
	</div>

	<script type="text/javascript" src="/assets/resources/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/assets/resources/bootstrap/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
</body>
</html>



